var api={post:function(a,c,b){$.ajax({type:"POST",url:bb.restUrl(a),data:c,dataType:"json",error:function(d,g,f){bb.msg(f,"error")},success:function(d){if(d.error){bb.msg(d.error.message,"error")}else{if(typeof b==="function"){return b(d.result)}else{if(window.hasOwnProperty("console")){console.log(d.result)}}}}})},get:function(a,c,b){$.ajax({type:"GET",url:bb.restUrl(a),data:c,dataType:"json",error:function(d,g,f){bb.msg(f,"error")},success:function(d){if(d.error){bb.msg(d.error.message,"error")}else{if(typeof b==="function"){return b(d.result)}else{if(window.hasOwnProperty("console")){console.log(d.result)}}}}})}};var bb={post:function(a,c,b){$.ajax({type:"POST",url:bb.restUrl(a),data:c,dataType:"json",error:function(d,g,f){bb.msg(f,"error")},success:function(d){if(d.error){bb.msg(d.error.message,"error")}else{if(typeof b==="function"){return b(d.result)}else{if(window.hasOwnProperty("console")){console.log(d.result)}}}}})},get:function(a,c,b){$.ajax({type:"GET",url:bb.restUrl(a),data:c,dataType:"json",error:function(d,g,f){bb.msg(f,"error")},success:function(d){if(d.error){bb.msg(d.error.message,"error")}else{if(typeof b==="function"){return b(d.result)}else{if(window.hasOwnProperty("console")){console.log(d.result)}}}}})},restUrl:function(a){return $('meta[property="bb:client_area"]').attr("content")+"api/"+a},reload:function(){window.location.href=window.location.href},redirect:function(a){if(a===undefined){window.location=$('meta[property="bb:url"]').attr("content")}else{window.location=a}},currency:function(c,b,d,a){c=parseFloat(c)*parseFloat(b);if(a!==undefined){c=c*a}return c.toFixed(2)+" "+d},popup:function(b){$("#default_popup").remove();var d=$('<div id="default_popup" class="popup_block"><h3></h3></div>').find("h3").text(b).parent().appendTo("body");var e=500;d.show().css({width:Number(e)}).prepend('<a href="#" class="close">X</a>');var c=(d.height()+80)/2;var a=(d.width()+80)/2;d.css({"margin-top":-c,"margin-left":-a,});$("body").append('<div id="fade"></div>');$("#fade").show();$("body").css("overflow","hidden");$("a.close, #fade").bind("click",function(){$("#fade , .popup_block").hide(function(){$("#fade, a.close").remove();$("body").css("overflow","");});return false});$("body").keyup(function(f){if(f.keyCode==27){$("#fade").click()}})},msg:function(a,b){bb.popup(a)},apiForm:function(){$("form.api_form, form.api-form").bind("submit",function(){var e=$(this).attr("data-api-redirect");var d=$(this).attr("data-api-jsonp");var c=$(this).attr("data-api-msg");var b=$(this).attr("data-api-reload");var a=$(this).attr("action");if($(this).attr("data-api-url")){a=$(this).attr("data-api-url")}api.post(a,$(this).serialize(),function(f){if(b!==undefined){bb.reload();return}if(e!==undefined){bb.redirect(e);return}if(c!==undefined){bb.msg(c);return}if(d!==undefined&&window.hasOwnProperty(d)){return window[d](f)}});return false})},apiLink:function(){$("a.api, a.api-link").bind("click",function(){var d=$(this).attr("data-api-redirect");var a=$(this).attr("data-api-reload");var c=$(this).attr("data-api-msg");var b=$(this).attr("data-api-jsonp");api.get($(this).attr("href"),{},function(e){if(c!==undefined){bb.msg(c);return}if(a!==undefined){bb.reload();return}if(b!==undefined&&window.hasOwnProperty(b)){return window[b](e)}bb.redirect(d)});return false})},MenuAutoActive:function(){var a=$("ul.main li a").filter(function(){return document.location.href==this.href});a.parents("li").addClass("active")},cookieCreate:function(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"},cookieRead:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null},CurrencySelector:function(){$("select.currency_selector").bind("change",function(){api.post("guest/cart/set_currency",{currency:$(this).val()},function(a){bb.reload()});return false})},LanguageSelector:function(){$("select.language_selector").bind("change",function(){bb.cookieCreate("BBLANG",$(this).val(),7);bb.reload();return false}).val(bb.cookieRead("BBLANG"))}};$.fn.simpleTabs=function(){$(this).find(".tab_content").hide();$(this).find("ul.tabs li:first").addClass("activeTab").show();$(this).find(".tab_content:first").show();$("ul.tabs li").click(function(){$(this).parent().parent().find("ul.tabs li").removeClass("activeTab");$(this).addClass("activeTab");$(this).parent().parent().find(".tab_content").hide();var a=$(this).find("a").attr("href");$(a).show();return false})};$("input").each(function(){if($(this).val()==""&&$(this).attr("placeholder")!=""){$(this).val($(this).attr("placeholder"));$(this).focus(function(){if($(this).val()==$(this).attr("placeholder")){$(this).val("")}});$(this).blur(function(){if($(this).val()==""){$(this).val($(this).attr("placeholder"))}})}});jQuery(function(a){a(".loading").ajaxStart(function(){a(this).show()}).ajaxStop(function(){a(this).hide()});a("div.simpleTabs").simpleTabs();if(a("select.currency_selector").length){bb.CurrencySelector()}if(a("select.language_selector").length){bb.LanguageSelector()}if(a("ul.main").length){bb.MenuAutoActive()}if(a("a.api, a.api-link").length){bb.apiLink()}if(a("form.api_form, form.api-form").length){bb.apiForm()}a("#login-form-link").bind("click",function(){a(this).fadeOut();a("#login-form").slideDown();return false});if(jQuery().tipsy){a("a.show-tip").tipsy({fade:true,delayIn:500})}});